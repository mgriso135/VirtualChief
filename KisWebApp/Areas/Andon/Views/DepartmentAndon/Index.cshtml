
@{
    Layout = null;
}

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <title>Virtual Chief</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Virtual Chief" />
    <meta name="author" content="Matteo Griso" />
    <link rel="shortcut icon" type="image/x-icon" href="~/img/favicon.ico" />
    <link href="../../Styles/Site.css" rel="stylesheet" type="text/css" />
    <link href="../../Styles/jquery-ui-1.10.3.custom/css/redmond/jquery-ui-1.10.3.custom.css" rel="stylesheet" type="text/css" />
    <script src="../../Styles/jquery-ui-1.10.3.custom/js/jquery-1.9.1.js"></script>
    <script src="../../Styles/jquery-ui-1.10.3.custom/js/jquery-ui-1.10.3.custom.js"></script>
    <script>
        $(function () {

            $("#accordion").accordion();



            var availableTags = [
                "ActionScript",
                "AppleScript",
                "Asp",
                "BASIC",
                "C",
                "C++",
                "Clojure",
                "COBOL",
                "ColdFusion",
                "Erlang",
                "Fortran",
                "Groovy",
                "Haskell",
                "Java",
                "JavaScript",
                "Lisp",
                "Perl",
                "PHP",
                "Python",
                "Ruby",
                "Scala",
                "Scheme"
            ];


            $("#datepicker").datepicker({
                inline: true
            });


        });
    </script>

    <link href="~/Styles/assets/css/bootstrap.css" rel="stylesheet" />
    <link href="~/Styles/assets/css/bootstrap-responsive.css" rel="stylesheet" />


    <title>Department's Andon</title>

</head>

    <script>
        $(document).ready(function(){
            var DepartmentID = @ViewBag.DepartmentID;
            var DepartmentName = "";
            var ScrollType = 0;
            var ShowProductivityIndicators = false;
            var ShowUserPanel = false;

        // use var dt = new Date("3/11/2013 1:00 UTC");
            function getConfiguration() {
                $.ajaxSetup({ async: false });
                $.post("@Url.Action("GetConfigurationParameters")", { DepartmentID}, function (data) {
                    data = $.parseJSON(data);
                    var newrows = "";
                    $.each(data, function (i, v) {
                        console.log(i, v);
                        //var strUDate = v.UploadDate.substr(0, 10);
                        //var strEDate = v.ExpiryDate.substr(0, 10);
                    });

                    $.each(data.ProductViewFields, function (i, v) {
                        console.log(i, v);
                    });
                    $.each(data.TasksViewFields, function (i, v) {
                        console.log(i, v);
                    });

                    DepartmentName = data.DepartmentName;
                    ScrollType = data.ScrollType;
                   // alert("data.ScrollType: " + data.ScrollType);
                    ScrollTypeContinuousGoSpeed = data.ContinuousScrollGoSpeed;
                    ScrollTypeContinuousBackSpeed = data.ContinuousScrollBackSpeed;
                    ShowProductivityIndicators = data.ShowProductivityIndicators;
                    ShowUserPanel = data.ShowActiveUsers;
                });
                console.log("Done");
            }


            function continuousScroll() {
                var GoSpeed = ScrollTypeContinuousGoSpeed;
                var BackSpeed = ScrollTypeContinuousBackSpeed;

                $('html, body').animate({ scrollTop: $(document).height() - $(window).height() }, GoSpeed, 'linear', function () {
                }).promise().then(function () {
                    $(this).animate({ scrollTop: 0 }, BackSpeed, 'linear');
                    continuousScroll();
                });

            }


    //        $.when(getConfiguration()).done(function () {
         //       alert("After getConfiguration(): " + ScrollType);
                if (ScrollType == 1) {
                    alert("Scroll");
                    continuousScroll();
                }
       //     });

            if (!ShowProductivityIndicators && !ShowUserPanel) {
                alert("Entro");
                $("#mainproducts").prop("class", "span12");
                $("#sidebar").hide();
            }
            else {
                alert(ShowProductivityIndicators + ShowUserPanel);
            }



        });
    </script>

<body>
    <div class="row-fluid">
        <div class="span12">
            WARNINGS
        </div>
    </div>
    <div class="row-fluid">
        <div class="span9" id="mainproducts">
            aascasvsdvds

        </div>

        <div class="span3" id="sidebar">
           ascasvdavd
        </div>

    </div>
</body>
</html>
